{% extends 'admin/base.html.twig' %}

{% block title %}{{ isEdit ? 'Edit User' : 'Add User' }}{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>{{ isEdit ? 'Edit User' : 'Add User' }}</h1>

    {{ form_start(form, {'attr': {'class': 'mt-3'}}) }}
        <div class="mb-3">
            {{ form_label(form.firstName) }}
            {{ form_widget(form.firstName, {'attr': {'class':'form-control'}}) }}
            {{ form_errors(form.firstName) }}
        </div>

        <div class="mb-3">
            {{ form_label(form.lastName) }}
            {{ form_widget(form.lastName, {'attr': {'class':'form-control'}}) }}
            {{ form_errors(form.lastName) }}
        </div>

        <div class="mb-3">
            {{ form_label(form.email) }}
            {{ form_widget(form.email, {'attr': {'class':'form-control'}}) }}
            {{ form_errors(form.email) }}
        </div>

        <div class="mb-3">
            {{ form_label(form.roles) }}
            {{ form_widget(form.roles, {'attr': {'class':'form-check form-check-inline'}}) }}
            {{ form_errors(form.roles) }}
        </div>

        {% if not isEdit %}
        <div class="mb-3">
            {{ form_label(form.password) }}
            {{ form_widget(form.password, {'attr': {'class':'form-control'}}) }}
            {{ form_errors(form.password) }}
        </div>
        {% endif %}

        {# IMPORTANT: render hidden fields (CSRF, etc.) #}
        {{ form_rest(form) }}

        <button class="btn btn-success" type="submit" id="form_save">
            {{ isEdit ? 'Update User' : 'Add User' }}
        </button>
        <a href="{{ path('admin_users') }}" class="btn btn-secondary">Cancel</a>

    {# since we already did form_rest, keep render_rest false #}
    {{ form_end(form, {'render_rest': false}) }}
</div>
{% endblock %}
